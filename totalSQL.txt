DROP TABLE "ADMIN";

CREATE TABLE "ADMIN" (
	"ADMIN_NO"	NUMBER		NOT NULL,
	"PERMISSION_NO"	NUMBER		NOT NULL,
	"ADMIN_ID"	VARCHAR2(100)		NOT NULL,
	"ADMIN_PWD"	VARCHAR2(100)		NOT NULL,
	"ADMIN_NAME"	VARCHAR2(100)		NULL
);

DROP TABLE "FREEBOARD";

CREATE TABLE "FREEBOARD" (
	"BOARD_NO"	NUMBER		NOT NULL,
	"MEMBER_NO"	NUMBER		NOT NULL,
	"TITLE"	VARCHAR2(100)		NOT NULL,
	"CONTENT"	VARCHAR2(1000)		NOT NULL,
	"ENROLL_DATE"	TIMESTAMP	DEFAULT SYSDATE	NOT NULL,
	"DELETE_YN"	CHAR(1)	DEFAULT 'N'	NOT NULL
);

COMMENT ON COLUMN "FREEBOARD"."BOARD_NO" IS '게시판 게시물번호';

COMMENT ON COLUMN "FREEBOARD"."MEMBER_NO" IS '게시판작성자';

COMMENT ON COLUMN "FREEBOARD"."TITLE" IS '게시판제목';

COMMENT ON COLUMN "FREEBOARD"."CONTENT" IS '게시판내용';

COMMENT ON COLUMN "FREEBOARD"."ENROLL_DATE" IS '게시판작성일시';

COMMENT ON COLUMN "FREEBOARD"."DELETE_YN" IS '게시판삭제여부';

DROP TABLE "MEMBER";

CREATE TABLE "MEMBER" (
	"MEMBER_NO"	NUMBER		NOT NULL,
	"SECURITY_Q_NO"	NUMBER		NOT NULL,
	"STATE_CODE"	CHAR(1)	DEFAULT 1	NOT NULL,
	"MEMBER_ID"	VARCHAR2(100)		NULL,
	"MEMBER_PWD"	VARCHAR2(100)		NULL,
	"MEMBER_NICK"	VARCHAR2(100)		NULL,
	"SIGN_UP_DATE"	TIMESTAMP	DEFAULT SYSDATE	NULL,
	"EMAIL"	NVARCHAR2(255)		NULL,
	"PHONE_NUMBER"	CHAR(11)		NULL,
	"SECURITY_A"	VARCHAR2(100)		NULL
);

COMMENT ON COLUMN "MEMBER"."STATE_CODE" IS '회원상태(정상이 디폴트)';

COMMENT ON COLUMN "MEMBER"."MEMBER_ID" IS '회원의  아이디를 저장';

COMMENT ON COLUMN "MEMBER"."MEMBER_PWD" IS '회원 비밀번호';

COMMENT ON COLUMN "MEMBER"."MEMBER_NICK" IS '회원이 지정한 별명';

COMMENT ON COLUMN "MEMBER"."SIGN_UP_DATE" IS '회원가입일';

COMMENT ON COLUMN "MEMBER"."EMAIL" IS '회원의 이메일';

COMMENT ON COLUMN "MEMBER"."PHONE_NUMBER" IS '회원의 핸드폰번호';

COMMENT ON COLUMN "MEMBER"."SECURITY_A" IS '비밀번호 찾기 위한 보안질문에 대한 답';

DROP TABLE "QUESTION";

CREATE TABLE "QUESTION" (
	"Q_NO"	NUMBER		NOT NULL,
	"ADMIN_NO"	NUMBER		NOT NULL,
	"MEMBER_NO"	NUMBER		NOT NULL,
	"CATEGORY_CODE"	NUMBER		NOT NULL,
	"DETAIL_CATEGORY_CODE"	NUMBER		NOT NULL,
	"Q_TITLE"	VARCHAR2(100)		NOT NULL,
	"Q_CONTENT"	VARCHAR2(1000)		NOT NULL,
	"Q_DATE"	TIMESTAMP		NOT NULL,
	"A_NO"	NUMBER		NULL,
	"A_TITLE"	VARCHAR2(100)		NULL,
	"A_CONTENT"	VARCHAR2(1000)		NULL,
	"A_DATE"	TIMESTAMP	DEFAULT SYSDATE	NULL,
	"DELETE_YN"	CHAR(1)	DEFAULT 'N'	NULL,
	"MORE_Q_NO"	NUMBER		NOT NULL
);

COMMENT ON COLUMN "QUESTION"."Q_NO" IS '고객센터문의번호';

COMMENT ON COLUMN "QUESTION"."MEMBER_NO" IS '고객센터 작성자';

COMMENT ON COLUMN "QUESTION"."Q_TITLE" IS '고객센터제목';

COMMENT ON COLUMN "QUESTION"."Q_CONTENT" IS '고객센터내용';

COMMENT ON COLUMN "QUESTION"."Q_DATE" IS '고객센터작성일자';

COMMENT ON COLUMN "QUESTION"."DELETE_YN" IS '답변삭제안함(N), 답변삭제(Y)';

DROP TABLE "CONTENTS";

CREATE TABLE "CONTENTS" (
	"CONTENTS_NO"	NUMBER		NOT NULL,
	"DIRECTOR_NO"	NUMBER		NOT NULL,
	"COUNTRY_NO"	NUMBER		NULL,
	"CATEGORY_NO"	NUMBER		NOT NULL,
	"CONTENTS_TITLE"	VARCHAR2(100)		NOT NULL,
	"SYNOPSIS"	VARCHAR2(1000)		NULL,
	"RELEASE_DATE"	TIMESTAMP		NULL,
	"CONTENTS_VIEWS"	NUMBER	DEFAULT 0	NULL,
	"DELETE_YN"	CHAR(1)	DEFAULT 'N'	NULL
);

DROP TABLE "GENRE";

CREATE TABLE "GENRE" (
	"GENRE_NO"	NUMBER		NOT NULL,
	"GENRE_NAME"	VARCHAR2(32)		NOT NULL
);

DROP TABLE "COMMENT";

CREATE TABLE "COMMENT" (
	"COMMENT_NO"	NUMBER		NOT NULL,
	"BOARD_NO"	NUMBER		NOT NULL,
	"MEMBER_NO"	NUMBER		NOT NULL,
	"C_CHAT"	VARCHAR2(1000)		NOT NULL,
	"ENROLL_DATE"	TIMESTAMP	DEFAULT SYSDATE	NULL
);

COMMENT ON COLUMN "COMMENT"."COMMENT_NO" IS '댓글번호';

COMMENT ON COLUMN "COMMENT"."BOARD_NO" IS '게시물번호';

COMMENT ON COLUMN "COMMENT"."MEMBER_NO" IS '작성자';

COMMENT ON COLUMN "COMMENT"."C_CHAT" IS '댓글내용';

COMMENT ON COLUMN "COMMENT"."ENROLL_DATE" IS '댓글작성일자';

DROP TABLE "CATEGORY";

CREATE TABLE "CATEGORY" (
	"CATEGORY_NO"	NUMBER		NOT NULL,
	"CATEGORY_NAME"	VARCHAR2(32)		NOT NULL
);

DROP TABLE "COUNTRY";

CREATE TABLE "COUNTRY" (
	"COUNTRY_NO"	NUMBER		NULL,
	"COUNTRY_NAME"	VARCHAR2(64)		NULL
);

DROP TABLE "PLATFORM";

CREATE TABLE "PLATFORM" (
	"PLATFORM_NO"	NUMBER		NULL,
	"PLATFORM_NAME"	VARCHAR2(32)		NULL
);

DROP TABLE "REVIEW";

CREATE TABLE "REVIEW" (
	"REVIEW_NO"	NUMBER		NOT NULL,
	"CONTENTS_NO"	NUMBER		NOT NULL,
	"MEMBER_NO"	NUMBER		NOT NULL,
	"REVIEW_CONTENT"	VARCHAR2(1000)		NULL,
	"REVIEW_SCORE"	NUMBER(2, 1)		NULL,
	"WRITE_DATE"	TIMESTAMP	DEFAULT SYSDATE	NULL,
	"DELETE_YN"	CHAR(1)	DEFAULT 'N'	NULL
);

DROP TABLE "STARRING";

CREATE TABLE "STARRING" (
	"STARRING_NO"	NUMBER		NOT NULL,
	"STARRING_NAME"	VARCHAR2(64)		NULL
);

DROP TABLE "EVENTBOARD";

CREATE TABLE "EVENTBOARD" (
	"EVENT_NO"	NUMBER		NOT NULL,
	"ADMIN_NO"	NUMBER		NOT NULL,
	"EVENT_TITLE"	VARCHAR2(100)		NULL,
	"EVENT_CONTENT"	VARCHAR2(2000)		NULL,
	"START_DATE"	TIMESTAMP		NULL,
	"END_DATE"	TIMESTAMP		NULL
);

DROP TABLE "MEMBER_STATE";

CREATE TABLE "MEMBER_STATE" (
	"STATE_CODE"	NUMBER		NOT NULL,
	"STATE_NAME"	CHAR(2 CHAR)		NULL
);

COMMENT ON COLUMN "MEMBER_STATE"."STATE_CODE" IS '회원상태(1. 정상, 2.제적, 3.탈퇴)';

COMMENT ON COLUMN "MEMBER_STATE"."STATE_NAME" IS '회원상태(정상, 제적, 탈퇴)';

DROP TABLE "BOARD_SANCTION";

CREATE TABLE "BOARD_SANCTION" (
	"BOARD_SANC_NO"	NUMBER		NOT NULL,
	"BOARD_NO"	NUMBER		NOT NULL,
	"SANC_CAT_NO"	NUMBER		NOT NULL
);

COMMENT ON COLUMN "BOARD_SANCTION"."BOARD_NO" IS '게시판 게시물번호';

DROP TABLE "REVIEW_SANCTION";

CREATE TABLE "REVIEW_SANCTION" (
	"REVIEW_SANC_NO"	NUMBER		NOT NULL,
	"REVIEW_NO"	NUMBER		NOT NULL,
	"SANC_CAT_NO"	NUMBER		NOT NULL
);

DROP TABLE "FAQ";

CREATE TABLE "FAQ" (
	"FAQ_NO"	NUMBER		NOT NULL,
	"ADMIN_NO"	NUMBER		NOT NULL,
	"FAQ_TITLE"	VARCHAR2(100)		NULL,
	"FAQ_CONTENT"	VARCHAR2(100)		NULL,
	"FAQ_SOLUTION"	VARCHAR2(100)		NULL,
	"GOOD_COUNT"	NUMBER	DEFAULT 0	NULL,
	"BAD_COUNT"	NUMBER	DEFAULT 0	NULL
);

DROP TABLE "PERMISSION";

CREATE TABLE "PERMISSION" (
	"PERMISSION_NO"	NUMBER		NOT NULL,
	"PERMISSION_NAME"	VARCHAR2(100)		NOT NULL,
	"PERMISSIONS"	NUMBER	DEFAULT 0	NOT NULL
);

DROP TABLE "MEMBER_SANCTION";

CREATE TABLE "MEMBER_SANCTION" (
	"SANCTION_NO"	NUMBER		NOT NULL,
	"ADMIN_NO"	NUMBER		NOT NULL,
	"MEMBER_NO"	NUMBER		NOT NULL,
	"SANC_CAT_NO"	NUMBER		NOT NULL,
	"SANCTION_DATE"	TIMESTAMP		NOT NULL,
	"EXPIRATION_DATE"	TIMESTAMP		NULL,
	"SANC_TYPE"	VARCHAR(10)		NULL,
	"BOARD_SANC_NO"	NUMBER		NOT NULL,
	"REVIEW_SANC_NO"	NUMBER		NOT NULL
);

COMMENT ON COLUMN "MEMBER_SANCTION"."SANC_TYPE" IS '게시글, 리뷰';

DROP TABLE "PWD_QUESTION";

CREATE TABLE "PWD_QUESTION" (
	"SECURITY_Q_NO"	NUMBER		NOT NULL,
	"SECURITY_Q"	VARCHAR2(100)		NULL
);

DROP TABLE "SANCTION_CATEGORY";

CREATE TABLE "SANCTION_CATEGORY" (
	"SANC_CAT_NO"	NUMBER		NOT NULL,
	"SANC_CAT_NAME"	VARCHAR(255)		NULL
);

COMMENT ON COLUMN "SANCTION_CATEGORY"."SANC_CAT_NAME" IS '욕설, 광고, 정치적/종교적, 성적';

DROP TABLE "DIRECTOR";

CREATE TABLE "DIRECTOR" (
	"DIRECTOR_NO"	NUMBER		NOT NULL,
	"DIRECTOR_NAME"	VARCHAR2(64)		NULL
);

DROP TABLE "CONTENTS_GENRE";

CREATE TABLE "CONTENTS_GENRE" (
	"CONTENTS_NO"	NUMBER		NOT NULL,
	"GENRE_NO"	NUMBER		NOT NULL
);

DROP TABLE "CONTENTS_PLATFORM";

CREATE TABLE "CONTENTS_PLATFORM" (
	"CONTENTS_NO"	NUMBER		NOT NULL,
	"PLATFORM_NO"	NUMBER		NULL
);

DROP TABLE "CONTENTS_STARRING";

CREATE TABLE "CONTENTS_STARRING" (
	"CONTENTS_NO"	NUMBER		NOT NULL,
	"STARRING_NO"	NUMBER		NOT NULL
);

DROP TABLE "EVENT1_ENTRANT_SCORE";

CREATE TABLE "EVENT1_ENTRANT_SCORE" (
	"EVENT1_E_NO"	NUMBER		NOT NULL,
	"MEMBER_NO"	NUMBER		NOT NULL,
	"EVENT_NO"	NUMBER		NOT NULL,
	"EVENT1_SCORE"	NUMBER		NULL,
	"EVENT1_E_DATE"	TIMESTAMP		NULL
);

DROP TABLE "EVENT2_ENTRANT_SCORE";

CREATE TABLE "EVENT2_ENTRANT_SCORE" (
	"EVENT2_E_NO"	NUMBER		NOT NULL,
	"MEMBER_NO"	NUMBER		NOT NULL,
	"EVENT_NO"	NUMBER		NOT NULL,
	"EVENT2_SCORE"	NUMBER		NULL,
	"EVENT2_E_DATE"	TIMESTAMP		NULL
);

DROP TABLE "QNA_CATEGORY";

CREATE TABLE "QNA_CATEGORY" (
	"CATEGORY_CODE"	NUMBER		NOT NULL,
	"CATEGORY_NAME"	VARCHAR2(100)		NULL
);

DROP TABLE "DETAIL_CATEGORY";

CREATE TABLE "DETAIL_CATEGORY" (
	"DETAIL_CATEGORY_CODE"	NUMBER		NOT NULL,
	"DETAIL_CATEGORY_NAME"	VARCHAR2(100)		NULL
);

ALTER TABLE "ADMIN" ADD CONSTRAINT "PK_ADMIN" PRIMARY KEY (
	"ADMIN_NO"
);

ALTER TABLE "FREEBOARD" ADD CONSTRAINT "PK_FREEBOARD" PRIMARY KEY (
	"BOARD_NO"
);

ALTER TABLE "MEMBER" ADD CONSTRAINT "PK_MEMBER" PRIMARY KEY (
	"MEMBER_NO"
);

ALTER TABLE "QUESTION" ADD CONSTRAINT "PK_QUESTION" PRIMARY KEY (
	"Q_NO"
);

ALTER TABLE "CONTENTS" ADD CONSTRAINT "PK_CONTENTS" PRIMARY KEY (
	"CONTENTS_NO"
);

ALTER TABLE "GENRE" ADD CONSTRAINT "PK_GENRE" PRIMARY KEY (
	"GENRE_NO"
);

ALTER TABLE "COMMENT" ADD CONSTRAINT "PK_COMMENT" PRIMARY KEY (
	"COMMENT_NO"
);

ALTER TABLE "CATEGORY" ADD CONSTRAINT "PK_CATEGORY" PRIMARY KEY (
	"CATEGORY_NO"
);

ALTER TABLE "COUNTRY" ADD CONSTRAINT "PK_COUNTRY" PRIMARY KEY (
	"COUNTRY_NO"
);

ALTER TABLE "PLATFORM" ADD CONSTRAINT "PK_PLATFORM" PRIMARY KEY (
	"PLATFORM_NO"
);

ALTER TABLE "REVIEW" ADD CONSTRAINT "PK_REVIEW" PRIMARY KEY (
	"REVIEW_NO"
);

ALTER TABLE "STARRING" ADD CONSTRAINT "PK_STARRING" PRIMARY KEY (
	"STARRING_NO"
);

ALTER TABLE "EVENTBOARD" ADD CONSTRAINT "PK_EVENTBOARD" PRIMARY KEY (
	"EVENT_NO"
);

ALTER TABLE "MEMBER_STATE" ADD CONSTRAINT "PK_MEMBER_STATE" PRIMARY KEY (
	"STATE_CODE"
);

ALTER TABLE "BOARD_SANCTION" ADD CONSTRAINT "PK_BOARD_SANCTION" PRIMARY KEY (
	"BOARD_SANC_NO"
);

ALTER TABLE "REVIEW_SANCTION" ADD CONSTRAINT "PK_REVIEW_SANCTION" PRIMARY KEY (
	"REVIEW_SANC_NO"
);

ALTER TABLE "FAQ" ADD CONSTRAINT "PK_FAQ" PRIMARY KEY (
	"FAQ_NO"
);

ALTER TABLE "PERMISSION" ADD CONSTRAINT "PK_PERMISSION" PRIMARY KEY (
	"PERMISSION_NO"
);

ALTER TABLE "MEMBER_SANCTION" ADD CONSTRAINT "PK_MEMBER_SANCTION" PRIMARY KEY (
	"SANCTION_NO"
);

ALTER TABLE "PWD_QUESTION" ADD CONSTRAINT "PK_PWD_QUESTION" PRIMARY KEY (
	"SECURITY_Q_NO"
);

ALTER TABLE "SANCTION_CATEGORY" ADD CONSTRAINT "PK_SANCTION_CATEGORY" PRIMARY KEY (
	"SANC_CAT_NO"
);

ALTER TABLE "DIRECTOR" ADD CONSTRAINT "PK_DIRECTOR" PRIMARY KEY (
	"DIRECTOR_NO"
);

ALTER TABLE "EVENT1_ENTRANT_SCORE" ADD CONSTRAINT "PK_EVENT1_ENTRANT_SCORE" PRIMARY KEY (
	"EVENT1_E_NO"
);

ALTER TABLE "EVENT2_ENTRANT_SCORE" ADD CONSTRAINT "PK_EVENT2_ENTRANT_SCORE" PRIMARY KEY (
	"EVENT2_E_NO"
);

ALTER TABLE "QNA_CATEGORY" ADD CONSTRAINT "PK_QNA_CATEGORY" PRIMARY KEY (
	"CATEGORY_CODE"
);

ALTER TABLE "DETAIL_CATEGORY" ADD CONSTRAINT "PK_DETAIL_CATEGORY" PRIMARY KEY (
	"DETAIL_CATEGORY_CODE"
);



-- 이벤트 게시판 더미 데이터
-- 이벤트 게시판 시퀀스 생성
-- 이벤트 1 점수번호 시퀀스 만들기
-- 이벤트 2 점수번호 시퀀스 만들기

DROP SEQUENCE  EVENTBOARD_NO;
CREATE SEQUENCE EVENTBOARD_NO
INCREMENT BY 1
START WITH 1
;

DROP SEQUENCE EVENT1_SCORE_NO;
CREATE SEQUENCE EVENT1_SCORE_NO
INCREMENT BY 1
START WITH 1
;

DROP SEQUENCE EVENT2_SCORE_NO;
CREATE SEQUENCE EVENT2_SCORE_NO
INCREMENT BY 1
START WITH 1
;

-- 이벤트 게시판 더미 데이터 넣기
INSERT INTO EVENTBOARD VALUES(
    EVENTBOARD_NO.NEXTVAL, 7, '리뷰를 10개 이상 쓰신 분들께 CGV 5000원 할인 쿠폰을 드립니다~!!', '안녕하세요. 관리자입니다. 여러분 잘 지내시나요? 다름이 아니라 돌아오는 3월부터 5월까지 리뷰를 10개 이상 쓰신 모든 분들께 CGV 5000원 쿠폰을 드립니다. 리뷰 많이 작성해주시고 5000원 쿠폰 꼭 받아주세요~. 10개 이상 쓰시면 자동으로 쿠폰 발급됩니다.', TO_TIMESTAMP('2023-02-20', 'YYYY-MM-DD'), TO_TIMESTAMP('2023-05-30', 'YYYY-MM-DD') 
);

INSERT INTO EVENTBOARD VALUES (
    EVENTBOARD_NO.NEXTVAL, 7, '가위바위보 게임', '안녕하세요. 관리자입니다. 여러분 잘 지내시죠? 제가 준비한 이벤트는 바로 가위바위보 게임입니다! 가위바위보 게임에서 컴퓨터를 5번 이기시면 CGV 팝콘과 음료 세트를 드립니다~ 많은 분들 참여 부탁드립니다~', TO_TIMESTAMP('2023-03-01', 'YYYY-MM-DD'), TO_TIMESTAMP('2023-12-30', 'YYYY-MM-DD')
);




INSERT INTO EVENT1_ENTRANT_SCORE VALUES(
    EVENT1_SCORE_NO.NEXTVAL, 1, 1, 20, SYSDATE
);

INSERT INTO EVENT1_ENTRANT_SCORE VALUES(
    EVENT1_SCORE_NO.NEXTVAL, 1, 3, 15, SYSDATE
);

INSERT INTO EVENT2_ENTRANT_SCORE VALUES(
    EVENT2_SCORE_NO.NEXTVAL, 2, 2, 7, SYSDATE
);

INSERT INTO EVENT2_ENTRANT_SCORE VALUES(
    EVENT2_SCORE_NO.NEXTVAL, 2, 5,10, SYSDATE
);


SELECT COUNT(REVIEW_NO) FROM REVIEW WHERE MEMBER_NO = 1;

SELECT EVENT_NO, EVENT_TITLE FROM EVENTBOARD;

commit;


SELECT * FROM EVENTBOARD;